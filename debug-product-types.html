<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•†å“ã‚¿ã‚¤ãƒ—ãƒ‡ãƒãƒƒã‚° - äº”å³è¡›é–€ECã‚µã‚¤ãƒˆ</title>
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #8B4513;
            padding-bottom: 10px;
        }
        .section {
            background: #f9f9f9;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #8B4513;
        }
        h2 {
            color: #8B4513;
            margin-top: 0;
        }
        pre {
            background: #fff;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border: 1px solid #ddd;
        }
        .btn {
            background: #8B4513;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .btn:hover {
            background: #654321;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-success:hover {
            background: #218838;
        }
        .link-test {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .link-test a {
            color: #8B4513;
            text-decoration: none;
            font-weight: bold;
        }
        .link-test a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” å•†å“ã‚¿ã‚¤ãƒ—ãƒ‡ãƒãƒƒã‚°ãƒšãƒ¼ã‚¸</h1>
        <p>ã“ã®ãƒšãƒ¼ã‚¸ã¯ã€å•†å“ã‚¿ã‚¤ãƒ—ã®ãƒªãƒ³ã‚¯ãŒæ­£ã—ãæ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ãŸã‚ã®ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p>

        <div class="section">
            <h2>ç¾åœ¨ã®localStorageãƒ‡ãƒ¼ã‚¿</h2>
            <button class="btn" onclick="showData()">ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º</button>
            <pre id="dataOutput">ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º...</pre>
        </div>

        <div class="section">
            <h2>ç”Ÿæˆã•ã‚Œã‚‹ãƒªãƒ³ã‚¯</h2>
            <div id="linksOutput">
                <p>ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</p>
            </div>
        </div>

        <div class="section">
            <h2>ä¿®æ­£ã‚ªãƒ—ã‚·ãƒ§ãƒ³</h2>
            <button class="btn btn-success" onclick="resetToDefault()">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¼ã‚¿ã«ãƒªã‚»ãƒƒãƒˆ</button>
            <p style="margin-top: 10px; font-size: 14px; color: #666;">
                â€» ã“ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€å•†å“ã‚¿ã‚¤ãƒ—ãŒæ­£ã—ã„slugå€¤ã§ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚
            </p>
        </div>

        <div class="section">
            <h2>ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³</h2>
            <a href="/" class="btn">ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>
            <a href="goemon-admin-settings.html" class="btn">è¨­å®šç”»é¢ã‚’é–‹ã</a>
        </div>
    </div>

    <script>
        // ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
        function showData() {
            const productTypesData = localStorage.getItem('goemonproducttypes');
            const output = document.getElementById('dataOutput');

            if (!productTypesData) {
                output.textContent = 'ã‚¨ãƒ©ãƒ¼: localStorageã«å•†å“ã‚¿ã‚¤ãƒ—ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚';
                return;
            }

            try {
                const productTypes = JSON.parse(productTypesData);
                output.textContent = JSON.stringify(productTypes, null, 2);

                // ãƒªãƒ³ã‚¯ã‚‚ç”Ÿæˆ
                generateLinks(productTypes);
            } catch (error) {
                output.textContent = 'ã‚¨ãƒ©ãƒ¼: ãƒ‡ãƒ¼ã‚¿ã®è§£æã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n' + error.message;
            }
        }

        // ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆã—ã¦è¡¨ç¤º
        function generateLinks(productTypes) {
            const linksOutput = document.getElementById('linksOutput');
            linksOutput.innerHTML = '';

            if (!productTypes || productTypes.length === 0) {
                linksOutput.innerHTML = '<p style="color: red;">å•†å“ã‚¿ã‚¤ãƒ—ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚</p>';
                return;
            }

            // ä¸¦ã³é †ã§ã‚½ãƒ¼ãƒˆ
            productTypes.sort((a, b) => a.order - b.order);

            productTypes.forEach(type => {
                const linkTest = document.createElement('div');
                linkTest.className = 'link-test';

                const url = `goemon-products.html?type=${type.slug}`;

                linkTest.innerHTML = `
                    <strong>${type.name}</strong><br>
                    ID: <code>${type.id}</code><br>
                    Slug: <code>${type.slug}</code><br>
                    ç”ŸæˆURL: <a href="${url}" target="_blank">${url}</a>
                `;

                linksOutput.appendChild(linkTest);
            });
        }

        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¼ã‚¿ã«ãƒªã‚»ãƒƒãƒˆ
        function resetToDefault() {
            if (!confirm('å•†å“ã‚¿ã‚¤ãƒ—ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ\n\næ³¨æ„: ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸå•†å“ã‚¿ã‚¤ãƒ—ã¯å¤±ã‚ã‚Œã¾ã™ã€‚')) {
                return;
            }

            const defaultProductTypes = [
                { id: 'new-arrivals', name: 'æ–°ç€ã‚¢ã‚¤ãƒ†ãƒ ', slug: 'new-arrivals', description: 'æœ€æ–°ã®å…¥è·å•†å“', order: 0 },
                { id: 'pre-order', name: 'äºˆç´„ã‚¢ã‚¤ãƒ†ãƒ ', slug: 'pre-order', description: 'äºˆç´„å—ä»˜ä¸­ã®å•†å“', order: 1 },
                { id: 'restock', name: 'å†å…¥è·', slug: 'restock', description: 'äººæ°—å•†å“ãŒå†å…¥è·', order: 2 }
            ];

            localStorage.setItem('goemonproducttypes', JSON.stringify(defaultProductTypes));

            alert('å•†å“ã‚¿ã‚¤ãƒ—ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸã€‚\n\nãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¨å•†å“ä¸€è¦§ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ç¢ºèªã—ã¦ãã ã•ã„ã€‚');

            // ãƒ‡ãƒ¼ã‚¿ã‚’å†è¡¨ç¤º
            showData();
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
        window.addEventListener('DOMContentLoaded', function() {
            showData();
        });
    </script>
</body>
</html>
